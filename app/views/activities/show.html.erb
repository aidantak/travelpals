<div class= "pictures">
  <%= cl_image_tag @activity.photos.first.key, class: "card-show-picture"%>
  <%= cl_image_tag @activity.user.photo.key, class: "card-index-profile" %>
</div>
<div>
  <div class= "description-index">
    <h3 class="title"><%= @activity.title %></h3>
    <div>
      <p class="date"><%= @activity.time.strftime('%A, %B %e, %Y at %l:%M %p') %></p>
    </div>
    <% if @already_booked == true %>
     <div class="btn-join">
      <%= link_to "Joined!", activity_booking_path(@activity, @booking), data: { turbo_method: :delete, confirm: "Are you sure you want to leave this activity?" }, class: "button-joined" %>
    <% else %>
      <%= link_to "Join", activity_bookings_path(@activity), data: {turbo_method: :post}, class: "button-join" %>
    </div>
    <% end %>
     <% if @activity.user == current_user %>
      <%= link_to "Edit", edit_activity_path(@activity) %>
    <% end %>
  </div>


  <div>
    <p class="details">Details</p>
    <p class="description"><%= @activity.description %></p>
  </div>
   <div>
      <div class="participants">
        <% if @activity.bookings.any? %>
          <div>
              <p class="details">Who's going</p>
              <% @activity.attendees.each do |attendee| %>
                <%= link_to user_path(attendee), class: "card-index-going" do %>
                  <%= cl_image_tag attendee.photo.key, width: 50, height: 50, class: "card-index-profile rounded-circle" %>
                <% end %>
              <% end %>
          </div>
          <div>
            <p class="details">Location<br><%=@activity.location %></p>
          </div>
        <% end %>
      </div>
    </div>
</div>
<div style="width: 100%; height: 600px;"
  data-controller="map"
  data-map-markers-value="<%= @markers.to_json %>"
  data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
</div>
